<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Authentication - Vite App</title>
    <script type="module" crossorigin src="./assets/style-DMDr5Rx3.js"></script>
    <script type="module" crossorigin src="./assets/quiz-storage-DIh2LGXt.js"></script>
    <script type="module" crossorigin src="./assets/common-DFqYpebv.js"></script>
    <link rel="stylesheet" crossorigin href="./assets/style-D-aLllQv.css">
  </head>
  <body>
    <div id="app">
      <h1>Processing Authentication...</h1>
      <p>Please wait while we complete your login.</p>
    </div>

    <script>
      // Handle the OAuth callback
      const urlParams = new URLSearchParams(window.location.search);
      const code = urlParams.get('code');

      if (code) {
        // In a real app, you'd exchange the code for a token via your backend
        // For now, we'll simulate a successful login
        console.log('Auth code received:', code);

        // Simulate successful authentication
        setTimeout(() => {
          const mockUser = {
            login: 'demo-user',
            name: 'Demo User',
            avatar_url: 'https://github.com/github.png',
          };

          localStorage.setItem('github_token', 'mock-token-' + Date.now());
          localStorage.setItem('github_user', JSON.stringify(mockUser));

          // Redirect back to the main page
          window.location.href = '/';
        }, 2000);
      } else {
        document.getElementById('app').innerHTML = `
          <h1>Authentication Error</h1>
          <p>No authorization code received. Please try again.</p>
          <a href="/" class="primary-btn">Go Home</a>
        `;
      }
    </script>
  </body>
</html>
