function x(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v}var R={exports:{}},M;function G(){return M||(M=1,function(v){var l=function(){var c=String.fromCharCode,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",y={};function O(r,t){if(!y[r]){y[r]={};for(var u=0;u<r.length;u++)y[r][r.charAt(u)]=u}return y[r][t]}var w={compressToBase64:function(r){if(r==null)return"";var t=w._compress(r,6,function(u){return S.charAt(u)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(r){return r==null?"":r==""?null:w._decompress(r.length,32,function(t){return O(S,r.charAt(t))})},compressToUTF16:function(r){return r==null?"":w._compress(r,15,function(t){return c(t+32)})+" "},decompressFromUTF16:function(r){return r==null?"":r==""?null:w._decompress(r.length,16384,function(t){return r.charCodeAt(t)-32})},compressToUint8Array:function(r){for(var t=w.compress(r),u=new Uint8Array(t.length*2),n=0,s=t.length;n<s;n++){var d=t.charCodeAt(n);u[n*2]=d>>>8,u[n*2+1]=d%256}return u},decompressFromUint8Array:function(r){if(r==null)return w.decompress(r);for(var t=new Array(r.length/2),u=0,n=t.length;u<n;u++)t[u]=r[u*2]*256+r[u*2+1];var s=[];return t.forEach(function(d){s.push(c(d))}),w.decompress(s.join(""))},compressToEncodedURIComponent:function(r){return r==null?"":w._compress(r,6,function(t){return m.charAt(t)})},decompressFromEncodedURIComponent:function(r){return r==null?"":r==""?null:(r=r.replace(/ /g,"+"),w._decompress(r.length,32,function(t){return O(m,r.charAt(t))}))},compress:function(r){return w._compress(r,16,function(t){return c(t)})},_compress:function(r,t,u){if(r==null)return"";var n,s,d={},_={},A="",E="",p="",g=2,h=3,a=2,f=[],e=0,i=0,o;for(o=0;o<r.length;o+=1)if(A=r.charAt(o),Object.prototype.hasOwnProperty.call(d,A)||(d[A]=h++,_[A]=!0),E=p+A,Object.prototype.hasOwnProperty.call(d,E))p=E;else{if(Object.prototype.hasOwnProperty.call(_,p)){if(p.charCodeAt(0)<256){for(n=0;n<a;n++)e=e<<1,i==t-1?(i=0,f.push(u(e)),e=0):i++;for(s=p.charCodeAt(0),n=0;n<8;n++)e=e<<1|s&1,i==t-1?(i=0,f.push(u(e)),e=0):i++,s=s>>1}else{for(s=1,n=0;n<a;n++)e=e<<1|s,i==t-1?(i=0,f.push(u(e)),e=0):i++,s=0;for(s=p.charCodeAt(0),n=0;n<16;n++)e=e<<1|s&1,i==t-1?(i=0,f.push(u(e)),e=0):i++,s=s>>1}g--,g==0&&(g=Math.pow(2,a),a++),delete _[p]}else for(s=d[p],n=0;n<a;n++)e=e<<1|s&1,i==t-1?(i=0,f.push(u(e)),e=0):i++,s=s>>1;g--,g==0&&(g=Math.pow(2,a),a++),d[E]=h++,p=String(A)}if(p!==""){if(Object.prototype.hasOwnProperty.call(_,p)){if(p.charCodeAt(0)<256){for(n=0;n<a;n++)e=e<<1,i==t-1?(i=0,f.push(u(e)),e=0):i++;for(s=p.charCodeAt(0),n=0;n<8;n++)e=e<<1|s&1,i==t-1?(i=0,f.push(u(e)),e=0):i++,s=s>>1}else{for(s=1,n=0;n<a;n++)e=e<<1|s,i==t-1?(i=0,f.push(u(e)),e=0):i++,s=0;for(s=p.charCodeAt(0),n=0;n<16;n++)e=e<<1|s&1,i==t-1?(i=0,f.push(u(e)),e=0):i++,s=s>>1}g--,g==0&&(g=Math.pow(2,a),a++),delete _[p]}else for(s=d[p],n=0;n<a;n++)e=e<<1|s&1,i==t-1?(i=0,f.push(u(e)),e=0):i++,s=s>>1;g--,g==0&&(g=Math.pow(2,a),a++)}for(s=2,n=0;n<a;n++)e=e<<1|s&1,i==t-1?(i=0,f.push(u(e)),e=0):i++,s=s>>1;for(;;)if(e=e<<1,i==t-1){f.push(u(e));break}else i++;return f.join("")},decompress:function(r){return r==null?"":r==""?null:w._decompress(r.length,32768,function(t){return r.charCodeAt(t)})},_decompress:function(r,t,u){var n=[],s=4,d=4,_=3,A="",E=[],p,g,h,a,f,e,i,o={val:u(0),position:t,index:1};for(p=0;p<3;p+=1)n[p]=p;for(h=0,f=Math.pow(2,2),e=1;e!=f;)a=o.val&o.position,o.position>>=1,o.position==0&&(o.position=t,o.val=u(o.index++)),h|=(a>0?1:0)*e,e<<=1;switch(h){case 0:for(h=0,f=Math.pow(2,8),e=1;e!=f;)a=o.val&o.position,o.position>>=1,o.position==0&&(o.position=t,o.val=u(o.index++)),h|=(a>0?1:0)*e,e<<=1;i=c(h);break;case 1:for(h=0,f=Math.pow(2,16),e=1;e!=f;)a=o.val&o.position,o.position>>=1,o.position==0&&(o.position=t,o.val=u(o.index++)),h|=(a>0?1:0)*e,e<<=1;i=c(h);break;case 2:return""}for(n[3]=i,g=i,E.push(i);;){if(o.index>r)return"";for(h=0,f=Math.pow(2,_),e=1;e!=f;)a=o.val&o.position,o.position>>=1,o.position==0&&(o.position=t,o.val=u(o.index++)),h|=(a>0?1:0)*e,e<<=1;switch(i=h){case 0:for(h=0,f=Math.pow(2,8),e=1;e!=f;)a=o.val&o.position,o.position>>=1,o.position==0&&(o.position=t,o.val=u(o.index++)),h|=(a>0?1:0)*e,e<<=1;n[d++]=c(h),i=d-1,s--;break;case 1:for(h=0,f=Math.pow(2,16),e=1;e!=f;)a=o.val&o.position,o.position>>=1,o.position==0&&(o.position=t,o.val=u(o.index++)),h|=(a>0?1:0)*e,e<<=1;n[d++]=c(h),i=d-1,s--;break;case 2:return E.join("")}if(s==0&&(s=Math.pow(2,_),_++),n[i])A=n[i];else if(i===d)A=g+g.charAt(0);else return null;E.push(A),n[d++]=g+A.charAt(0),s--,g=A,s==0&&(s=Math.pow(2,_),_++)}}};return w}();v!=null?v.exports=l:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return l})}(R)),R.exports}var z=G();const T=x(z);class L{constructor(){this.STORAGE_KEY="brightly_quiz_results",this.MAX_STORAGE_SIZE=4.5*1024*1024,this.MAX_RESULTS=100}compress(l){try{const c=JSON.stringify(l);return T.compress(c)}catch(c){return console.error("Compression error:",c),null}}decompress(l){try{const c=T.decompress(l);return JSON.parse(c)}catch(c){return console.error("Decompression error:",c),null}}getAllResults(){try{const l=localStorage.getItem(this.STORAGE_KEY);return l?this.decompress(l)||[]:[]}catch(l){return console.error("Error reading quiz results:",l),[]}}saveResult(l){try{const c=this.getAllResults(),S={...l,id:this.generateId(),timestamp:new Date().toISOString(),dateTime:new Date().toLocaleString()};c.unshift(S),this.cleanupResults(c);const m=this.compress(c);if(!m)throw new Error("Failed to compress data");return m.length>this.MAX_STORAGE_SIZE?(console.warn("Quiz result too large to store"),!1):(localStorage.setItem(this.STORAGE_KEY,m),!0)}catch(c){return console.error("Error saving quiz result:",c),!1}}cleanupResults(l){for(;l.length>this.MAX_RESULTS;)l.pop();let c=this.compress(l);for(;c&&c.length>this.MAX_STORAGE_SIZE&&l.length>1;)l.pop(),c=this.compress(l)}getResultById(l){return this.getAllResults().find(S=>S.id===l)}deleteResult(l){try{const S=this.getAllResults().filter(y=>y.id!==l),m=this.compress(S);return m?(localStorage.setItem(this.STORAGE_KEY,m),!0):!1}catch(c){return console.error("Error deleting quiz result:",c),!1}}clearAllResults(){try{return localStorage.removeItem(this.STORAGE_KEY),!0}catch(l){return console.error("Error clearing quiz results:",l),!1}}getStorageStats(){try{const l=localStorage.getItem(this.STORAGE_KEY);if(!l)return{totalResults:0,storageUsed:0,storageLimit:this.MAX_STORAGE_SIZE,storagePercentage:0};const c=this.getAllResults(),S=l.length,m=S/this.MAX_STORAGE_SIZE*100;return{totalResults:c.length,storageUsed:S,storageLimit:this.MAX_STORAGE_SIZE,storagePercentage:Math.round(m*100)/100}}catch(l){return console.error("Error getting storage stats:",l),null}}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}getQuizType(l){const c=l.toLowerCase();return c.includes("math")||c.includes("basics")?"Math Basics":c.includes("grammar")||c.includes("english")?"English Grammar":c.includes("habits")?"Habits Quiz":c.includes("kannada")?"Kannada Quiz":c.includes("hindi")?"Hindi Quiz":c.includes("general")||c.includes("knowledge")?"General Knowledge":l}formatQuizResult(l,c){return{quizType:this.getQuizType(c),quizTitle:c,totalQuestions:l.totalQuestions,correctAnswers:l.correctAnswers,incorrectAnswers:l.totalQuestions-l.correctAnswers,score:l.score,timeSpent:l.timeSpent,questions:l.questions.map(S=>({question:S.question,correctAnswer:S.correctAnswer,userAnswer:S.userAnswer,isCorrect:S.isCorrect,timeSpent:S.timeSpent})),configuration:l.configuration||{}}}}const U=new L;export{x as g,U as q};
